---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "devzero_workload_policy_target Resource - devzero"
subcategory: ""
description: |-
  Defines which workloads a policy applies to by selecting namespaces, workloads, names, and clusters. Combine selectors and filters to precisely target Kubernetes objects.
---

# devzero_workload_policy_target (Resource)

Defines which workloads a policy applies to by selecting namespaces, workloads, names, and clusters. Combine selectors and filters to precisely target Kubernetes objects.

## Example Usage

```terraform
resource "devzero_cluster" "cluster" {
  name = "terraform-example"
}

resource "devzero_workload_policy" "workload_policy" {
  name = "terraform-example"
}

# Only required attributes
resource "devzero_workload_policy_target" "workload_policy_target" {
  name        = "terraform-example"
  policy_id   = devzero_workload_policy.workload_policy.id
  cluster_ids = [devzero_cluster.cluster.id]
}

# All attributes
resource "devzero_workload_policy_target" "workload_policy_target" {
  name        = "terraform-example"
  description = "some description"
  policy_id   = devzero_workload_policy.workload_policy.id
  cluster_ids = [devzero_cluster.cluster.id]
  priority    = 1
  enabled     = true

  workload_names   = ["workload-1", "workload-2"]     # Empty list means all workloads
  node_group_names = ["node-group-1", "node-group-2"] # Empty list means all node groups
  kind_filter      = ["Deployment", "ReplicaSet"]     # Empty list means all kinds

  name_pattern = {
    pattern = "terraform-example"
    flags   = "i"
  }

  namespace_selector = {
    match_labels = {
      app = "terraform-example"
    }
  }

  workload_selector = {
    match_labels = {
      app = "terraform-example"
    }
  }

  annotation_selector = {
    match_labels = {
      app = "terraform-example"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_ids` (List of String) Clusters where this target should apply. Provide one or more cluster IDs from `devzero_cluster`.
- `name` (String) Human-friendly name for this target. Used for display in the DevZero UI.
- `policy_id` (String) Workload policy to attach this target to. Must reference an existing `devzero_workload_policy` resource ID.

### Optional

- `annotation_selector` (Attributes) Select workloads by annotations. Works like `namespace_selector` and `workload_selector` but against annotations. (see [below for nested schema](#nestedatt--annotation_selector))
- `description` (String) Free-form description of the target to help others understand its purpose.
- `enabled` (Boolean) Enable or disable this target. When disabled, the associated policy will not apply to the selected workloads.
- `kind_filter` (List of String) Restrict matching to specific Kubernetes kinds. Allowed values: `Pod`, `Job`, `Deployment`, `StatefulSet`, `DaemonSet`, `ReplicaSet`, `CronJob`, `ReplicationController`, `Rollout`.
- `name_pattern` (Attributes) Regex to match workload names. Useful to target rollouts or name conventions (e.g., `^api-.*`). (see [below for nested schema](#nestedatt--name_pattern))
- `namespace_selector` (Attributes) Select namespaces by labels. Uses the same semantics as Kubernetes label selectors. (see [below for nested schema](#nestedatt--namespace_selector))
- `node_group_names` (List of String) Restrict matching to specific node groups by name
- `priority` (Number) Evaluation priority among multiple targets. Higher values take precedence when multiple targets overlap.
- `workload_names` (List of String) Explicit list of workload names to include
- `workload_selector` (Attributes) Select workloads by labels. Applies to Kubernetes objects like Deployments, StatefulSets, DaemonSets, etc. (see [below for nested schema](#nestedatt--workload_selector))

### Read-Only

- `id` (String) Unique identifier of the workload policy target. Managed by the provider.

<a id="nestedatt--annotation_selector"></a>
### Nested Schema for `annotation_selector`

Optional:

- `match_expressions` (Attributes List) Advanced label selector requirements. Each expression supports operators `In`, `NotIn`, `Exists`, `DoesNotExist`. Use `values` only with `In`/`NotIn`. (see [below for nested schema](#nestedatt--annotation_selector--match_expressions))
- `match_labels` (Map of String) Exact label key/value pairs that the target must match. Keys and values must be strings. Example: `{ "app": "api", "env": "prod" }`.

<a id="nestedatt--annotation_selector--match_expressions"></a>
### Nested Schema for `annotation_selector.match_expressions`

Optional:

- `key` (String) Label key to evaluate. Example: `app` or `kubernetes.io/name`.
- `operator` (String) Label selection operator. One of `In`, `NotIn`, `Exists`, `DoesNotExist`.
- `values` (List of String) Values to compare against the key. Required with `In`/`NotIn`; must be omitted with `Exists`/`DoesNotExist`.



<a id="nestedatt--name_pattern"></a>
### Nested Schema for `name_pattern`

Optional:

- `flags` (String) Regex flags to modify matching behavior. Supported: `i` (case-insensitive), `m` (multi-line).
- `pattern` (String) Regular expression applied to workload names. Uses RE2 syntax. Example: `^api-(staging|prod)-.*$`.


<a id="nestedatt--namespace_selector"></a>
### Nested Schema for `namespace_selector`

Optional:

- `match_expressions` (Attributes List) Advanced label selector requirements. Each expression supports operators `In`, `NotIn`, `Exists`, `DoesNotExist`. Use `values` only with `In`/`NotIn`. (see [below for nested schema](#nestedatt--namespace_selector--match_expressions))
- `match_labels` (Map of String) Exact label key/value pairs that the target must match. Keys and values must be strings. Example: `{ "app": "api", "env": "prod" }`.

<a id="nestedatt--namespace_selector--match_expressions"></a>
### Nested Schema for `namespace_selector.match_expressions`

Optional:

- `key` (String) Label key to evaluate. Example: `app` or `kubernetes.io/name`.
- `operator` (String) Label selection operator. One of `In`, `NotIn`, `Exists`, `DoesNotExist`.
- `values` (List of String) Values to compare against the key. Required with `In`/`NotIn`; must be omitted with `Exists`/`DoesNotExist`.



<a id="nestedatt--workload_selector"></a>
### Nested Schema for `workload_selector`

Optional:

- `match_expressions` (Attributes List) Advanced label selector requirements. Each expression supports operators `In`, `NotIn`, `Exists`, `DoesNotExist`. Use `values` only with `In`/`NotIn`. (see [below for nested schema](#nestedatt--workload_selector--match_expressions))
- `match_labels` (Map of String) Exact label key/value pairs that the target must match. Keys and values must be strings. Example: `{ "app": "api", "env": "prod" }`.

<a id="nestedatt--workload_selector--match_expressions"></a>
### Nested Schema for `workload_selector.match_expressions`

Optional:

- `key` (String) Label key to evaluate. Example: `app` or `kubernetes.io/name`.
- `operator` (String) Label selection operator. One of `In`, `NotIn`, `Exists`, `DoesNotExist`.
- `values` (List of String) Values to compare against the key. Required with `In`/`NotIn`; must be omitted with `Exists`/`DoesNotExist`.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import devzero_workload_policy_target.workload_policy_target <workload_policy_target_id>
```
