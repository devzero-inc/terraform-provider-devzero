---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "devzero_workload_policy Resource - devzero"
subcategory: ""
description: |-
  Configures DevZero workload recommendation policies, including triggers, scaling targets, and scheduler options.
---

# devzero_workload_policy (Resource)

Configures DevZero workload recommendation policies, including triggers, scaling targets, and scheduler options.

## Example Usage

```terraform
# Only required attributes
resource "devzero_workload_policy" "workload_policy" {
  name            = "terraform-example"
  action_triggers = ["on_detection", "on_schedule"]
}

# All attributes
resource "devzero_workload_policy" "workload_policy" {
  name                     = "terraform-example"
  description              = "some description"
  action_triggers          = ["on_detection", "on_schedule"]
  cron_schedule            = "*/15 * * * *" # Every 15th minute
  detection_triggers       = ["pod_creation", "pod_update"]
  recommendation_mode      = "balanced"
  loopback_period_seconds  = 3600 # 1 hour
  startup_period_seconds   = 60   # 1 minute
  live_migration_enabled   = true
  scheduler_plugins        = ["dz-scheduler"]
  defragmentation_schedule = "*/15 * * * *"

  cpu_vertical_scaling = {
    enabled                   = true
    min_request               = 1000
    max_request               = 2000
    overhead_multiplier       = 0.05 # 5%
    limits_adjustment_enabled = true
  }

  memory_vertical_scaling = {
    enabled                   = true
    min_request               = 1000
    max_request               = 2000
    overhead_multiplier       = 0.05 # 5%
    limits_adjustment_enabled = true
  }

  gpu_vertical_scaling = {
    enabled                   = true
    min_request               = 1000
    max_request               = 2000
    overhead_multiplier       = 0.05 # 5%
    limits_adjustment_enabled = false
  }

  gpu_vram_vertical_scaling = {
    enabled                   = true
    min_request               = 1000
    max_request               = 2000
    overhead_multiplier       = 0.05 # 5%
    limits_adjustment_enabled = false
  }

  horizontal_scaling = {
    enabled                   = true
    min_replicas              = 1
    max_replicas              = 2
    overhead_multiplier       = 0.05 # 5%
    limits_adjustment_enabled = true
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action_triggers` (List of String) Action triggers for when to apply the workload policy. Only one of `on_schedule` or `on_detection` is allowed.The `on_schedule` trigger is used to apply the workload policy on a schedule configured with the `cron_schedule` attribute.The `on_detection` trigger is used to apply the workload policy when a detection trigger event occurs, configured with the `detection_triggers` attribute.
- `name` (String) Human-friendly name for the policy. Used for display in the DevZero UI.

### Optional

- `cooldown_minutes` (Number) Minutes to wait between applying recommendations
- `cpu_vertical_scaling` (Attributes) CPU vertical scaling options (see [below for nested schema](#nestedatt--cpu_vertical_scaling))
- `cron_schedule` (String) Cron expression for scheduled application. Uses standard 5-field cron format in the cluster timezone.
- `defragmentation_schedule` (String) Cron expression for background defragmentation that can move workloads to reduce fragmentation.
- `description` (String) Free-form description of the policy to help others understand its intent and scope.
- `detection_triggers` (List of String) Detection triggers for when to apply the workload policy. Only one of `pod_creation` or `pod_update` is allowed.The `pod_creation` trigger is used to apply the workload policy when a pod is created.The `pod_update` trigger is used to apply the workload policy when a pod is updated.
- `drift_delta_percent` (Number) Percentage drift from baseline that triggers VPA refresh
- `gpu_vertical_scaling` (Attributes) GPU vertical scaling options (see [below for nested schema](#nestedatt--gpu_vertical_scaling))
- `gpu_vram_vertical_scaling` (Attributes) GPU VRAM vertical scaling options (see [below for nested schema](#nestedatt--gpu_vram_vertical_scaling))
- `horizontal_scaling` (Attributes) Horizontal scaling options (see [below for nested schema](#nestedatt--horizontal_scaling))
- `hysteresis_vs_target` (Number) Hysteresis threshold vs target for HPA coordination
- `live_migration_enabled` (Boolean) Allow live migration when applying recommendations
- `loopback_period_seconds` (Number) Loopback period seconds of the workload policy. The loopback period is the period of time to look back for resource usage data.
- `memory_vertical_scaling` (Attributes) Memory vertical scaling options (see [below for nested schema](#nestedatt--memory_vertical_scaling))
- `min_change_percent` (Number) Global minimum change threshold for applying recommendations
- `min_data_points` (Number) Global minimum data points required for recommendations
- `min_vpa_window_data_points` (Number) Minimum data points in VPA analysis window
- `scheduler_plugins` (List of String) Kubernetes scheduler plugins to activate
- `stability_cv_max` (Number) Maximum coefficient of variation to consider stable
- `startup_period_seconds` (Number) Startup period seconds of the workload policy. The startup period is the period of time to ignore resource usage data after the workload is started.

### Read-Only

- `id` (String) Unique identifier of the workload policy. Managed by the provider.

<a id="nestedatt--cpu_vertical_scaling"></a>
### Nested Schema for `cpu_vertical_scaling`

Optional:

- `enabled` (Boolean) Enable or disable vertical scaling for this resource. When disabled, vertical recommendations will not be applied.
- `limit_multiplier` (Number) How much higher limits should be vs requests (e.g., 2.0 = 2x the request).
- `limits_adjustment_enabled` (Boolean) Allow recommender to adjust container limits as well as requests. When disabled, only requests are modified.
- `max_request` (Number) Upper bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `max_scale_down_percent` (Number) Maximum percent to scale down in one step
- `max_scale_up_percent` (Number) Maximum percent to scale up in one step
- `min_data_points` (Number) Minimum data points required for VPA decisions
- `min_request` (Number) Lower bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `overhead_multiplier` (Number) Additional headroom added to recommendations, expressed as a fraction (e.g., 0.05 for 5%).
- `target_percentile` (Number) Target percentile for resource sizing (e.g., 0.75 = P75).


<a id="nestedatt--gpu_vertical_scaling"></a>
### Nested Schema for `gpu_vertical_scaling`

Optional:

- `enabled` (Boolean) Enable or disable vertical scaling for this resource. When disabled, vertical recommendations will not be applied.
- `limit_multiplier` (Number) How much higher limits should be vs requests (e.g., 2.0 = 2x the request).
- `limits_adjustment_enabled` (Boolean) Allow recommender to adjust container limits as well as requests. When disabled, only requests are modified.
- `max_request` (Number) Upper bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `max_scale_down_percent` (Number) Maximum percent to scale down in one step
- `max_scale_up_percent` (Number) Maximum percent to scale up in one step
- `min_data_points` (Number) Minimum data points required for VPA decisions
- `min_request` (Number) Lower bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `overhead_multiplier` (Number) Additional headroom added to recommendations, expressed as a fraction (e.g., 0.05 for 5%).
- `target_percentile` (Number) Target percentile for resource sizing (e.g., 0.75 = P75).


<a id="nestedatt--gpu_vram_vertical_scaling"></a>
### Nested Schema for `gpu_vram_vertical_scaling`

Optional:

- `enabled` (Boolean) Enable or disable vertical scaling for this resource. When disabled, vertical recommendations will not be applied.
- `limit_multiplier` (Number) How much higher limits should be vs requests (e.g., 2.0 = 2x the request).
- `limits_adjustment_enabled` (Boolean) Allow recommender to adjust container limits as well as requests. When disabled, only requests are modified.
- `max_request` (Number) Upper bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `max_scale_down_percent` (Number) Maximum percent to scale down in one step
- `max_scale_up_percent` (Number) Maximum percent to scale up in one step
- `min_data_points` (Number) Minimum data points required for VPA decisions
- `min_request` (Number) Lower bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `overhead_multiplier` (Number) Additional headroom added to recommendations, expressed as a fraction (e.g., 0.05 for 5%).
- `target_percentile` (Number) Target percentile for resource sizing (e.g., 0.75 = P75).


<a id="nestedatt--horizontal_scaling"></a>
### Nested Schema for `horizontal_scaling`

Optional:

- `enabled` (Boolean) Enable or disable horizontal scaling
- `max_replica_change_percent` (Number) Maximum percent replica change in one step
- `max_replicas` (Number) Upper bound on replicas
- `min_data_points` (Number) Minimum data points required for HPA decisions
- `min_replicas` (Number) Lower bound on replicas
- `primary_metric` (String) Primary metric to use for HPA decisions
- `target_utilization` (Number) Target utilization for primary metric (0.0-1.0)


<a id="nestedatt--memory_vertical_scaling"></a>
### Nested Schema for `memory_vertical_scaling`

Optional:

- `enabled` (Boolean) Enable or disable vertical scaling for this resource. When disabled, vertical recommendations will not be applied.
- `limit_multiplier` (Number) How much higher limits should be vs requests (e.g., 2.0 = 2x the request).
- `limits_adjustment_enabled` (Boolean) Allow recommender to adjust container limits as well as requests. When disabled, only requests are modified.
- `max_request` (Number) Upper bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `max_scale_down_percent` (Number) Maximum percent to scale down in one step
- `max_scale_up_percent` (Number) Maximum percent to scale up in one step
- `min_data_points` (Number) Minimum data points required for VPA decisions
- `min_request` (Number) Lower bound for container resource requests (e.g., CPU millicores or memory bytes) considered by the recommender.
- `overhead_multiplier` (Number) Additional headroom added to recommendations, expressed as a fraction (e.g., 0.05 for 5%).
- `target_percentile` (Number) Target percentile for resource sizing (e.g., 0.75 = P75).

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import devzero_workload_policy.workload_policy <workload_policy_id>
```
